<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>متجر مريام - مكياج عصري</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&family=Reem+Kufi:wght@400;700&display=swap" rel="stylesheet">
  <!-- Intersection Observer Polyfill for wider browser support -->
  <script src="https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap');
    
    * {
      font-family: 'Tajawal', sans-serif;
    }
    
    :root {
      --primary-pink: #fef7ff;
      --light-pink: #fdf2f8;
      --medium-pink: #fbcfe8;
      --dark-pink: #f3b4d1;
      --header-pink-medium: #F472B6;
    }
    
    .gradient-pink {
      background: linear-gradient(135deg, #fefcff 0%, #fef7ff 50%, #fdf2f8 100%);
    }
    
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(244, 114, 182, 0.08);
    }
    
    .product-image {
      transition: transform 0.3s ease;
    }
    
    .product-image:hover {
      transform: scale(1.05);
    }
    
    .cart-badge {
      animation: bounce 0.5s ease;
    }
    
    @keyframes bounce {
      0%, 20%, 53%, 80%, 100% { transform: translateY(0); }
      40%, 43% { transform: translateY(-10px); }
      70% { transform: translateY(-5px); }
    }
    
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease;
    }
    
    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .modal {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.95);
    }

    .modal-content {
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .heart-icon {
      transition: all 0.3s ease;
    }
    
    .heart-icon:hover {
      color: #f472b6;
      transform: scale(1.2);
    }
    
    .heart-icon.liked {
      color: #f472b6;
      transform: scale(1.1);
    }
    
    .navbar-glass {
      backdrop-filter: blur(20px);
      background: var(--header-pink-medium);
      border-bottom: 1px solid rgba(244, 114, 182, 0.1);
      transition: background 0.3s ease-in-out;
    }

    .navbar-glass.scrolled {
      background: rgba(244, 114, 182, 0.8);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .store-title {
      font-family: 'Reem Kufi', sans-serif;
      font-weight: 700;
      font-size: 2.5rem;
      color: #fff;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    
    .filter-button {
      transition: all 0.3s ease;
    }
    
    .filter-button.active {
      background: #f472b6;
      color: white;
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(244, 114, 182, 0.2);
    }
    .filter-button:hover:not(.active) {
      background: #fbcfe8;
      color: #f472b6;
    }
    
    .page-section {
      display: none;
    }
    
    .page-section.active {
      display: block;
    }

    img {
      background: linear-gradient(135deg, #fce7f3 0%, #f3e8ff 100%);
      position: relative;
    }

    img:before {
      content: "صورة المنتج";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #d946ef;
      font-size: 14px;
      text-align: center;
    }

    .cart-items-scroll {
      max-height: 400px;
      overflow-y: auto;
      padding-right: 10px;
    }

    .option-selected {
        border-color: #f472b6;
        box-shadow: 0 0 0 2px #f472b6;
    }
    
    /* تعديلات ألوان النصوص الوصفية */
    .product-description, /* هذا يغطي وصف المنتج في الصفحة الرئيسية وصفحة المفضلة */
    #modalProductDescription { /* هذا يغطي وصف المنتج داخل النافذة المنبثقة لتفاصيل المنتج */
      color: #000000 !important; /* لون أسود */
      font-size: 0.9rem; /* زيادة حجم الخط */
      line-height: 1.5; /* تحسين تباعد السطور */
      margin-bottom: 1rem; /* زيادة المسافة */
      font-weight: 400; /* سمك الخط مناسب */
    }

    /* تعديلات ألوان النصوص داخل سلة التسوق */
    #cartItems p {
        color: #000000 !important;  /* تغيير لون النص إلى أسود */
    }
    
    #cartItems .text-xs {
        color: #666 !important;     /* لون النص الفرعي (أفتح قليلاً) */
    }

    /* Animation on scroll styles */
    .animate-on-scroll {
      opacity: 0;
      transform: translateY(50px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .animate-on-scroll.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    .animate-scale-in {
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .animate-scale-in.is-visible {
      opacity: 1;
      transform: scale(1);
    }

    /* Checkout Page Specific Styles */
    #checkoutPage {
      padding-top: 80px; /* Adjust based on navbar height */
    }
    .checkout-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
    }
    .checkout-card {
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(244, 114, 182, 0.15);
      padding: 2rem;
    }
    .checkout-title {
      color: #f472b6;
      font-weight: 700;
      font-size: 2rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }
    .form-group {
      margin-bottom: 1.5rem;
    }
    .form-label {
      display: block;
      color: #f472b6;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .form-input {
      border: 1px solid #fbcfe8;
      border-radius: 8px;
      padding: 0.75rem;
      width: 100%;
      background-color: #fff;
      color: #000;
      transition: all 0.3s ease;
    }
    .form-input:focus {
      border-color: #f472b6;
      box-shadow: 0 0 0 3px rgba(244, 114, 182, 0.2);
      outline: none;
    }
    .order-summary-title {
      color: #f472b6;
      font-weight: 700;
      font-size: 1.5rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid #fbcfe8;
      padding-bottom: 0.5rem;
    }
    .order-summary-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
      border-bottom: 1px dashed #fbcfe8;
    }
    .order-summary-item:last-child {
      border-bottom: none;
    }
    .order-summary-item img {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 8px;
      margin-left: 10px;
    }
    .order-summary-item-details {
      flex-grow: 1;
      color: #000;
    }
    .order-summary-item-details h4 {
      font-weight: 600;
      color: #f472b6;
    }
    .order-summary-item-details p {
      font-size: 0.85rem;
      color: #666;
    }
    .order-summary-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 1rem;
      font-size: 1.25rem;
      font-weight: 700;
      color: #f472b6;
    }
    .confirm-order-btn {
      background-color: #f472b6;
      color: white;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      transition: all 0.3s ease;
      display: block;
      width: 100%;
      text-align: center;
      margin-top: 2rem;
    }
    .confirm-order-btn:hover {
      background-color: #e061a0;
      transform: translateY(-2px);
    }
    .confirm-order-btn:active {
      transform: translateY(0);
    }

    /* Custom Notification Style */
    .notification-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: flex-end; /* Align notifications to the right */
    }

    .notification-item {
      background-color: #10B981; /* Default green for success */
      color: white;
      padding: 16px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      margin-bottom: 10px; /* Space between multiple notifications */
      opacity: 0;
      transform: translateY(-20px);
      transition: opacity 0.5s ease-out, transform 0.5s ease-out;
      max-width: 300px;
      text-align: center;
    }

    .notification-item.show {
      opacity: 1;
      transform: translateY(0);
    }

    .notification-item.hide {
      opacity: 0;
      transform: translateY(-20px);
    }

    .notification-item .main-message {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 8px;
    }

    .notification-item .sub-message {
      font-size: 14px;
    }

    /* Style for regular (non-success) notifications */
    .notification-item.regular {
      background-color: #f472b6; /* Pink for regular messages */
    }
    /* Style for error notifications */
    .notification-item.error {
      background-color: #EF4444; /* Red for error messages */
    }
  </style>
</head>
<body class="bg-gradient-to-br from-pink-25 to-white min-h-screen" style="background: linear-gradient(135deg, #fefcff 0%, #ffffff 100%);">
  
  <!-- Navigation Bar -->
  <nav class="fixed top-0 w-full z-50 navbar-glass" id="navbar">
    <div class="container mx-auto px-6 py-4">
      <div class="flex justify-between items-center">
        <div class="text-2xl font-bold cursor-pointer store-title" onclick="showPage('home')">متجر مريام</div>
        
        <!-- Search Bar -->
        <div class="hidden md:flex flex-1 max-w-md mx-8">
          <div class="relative w-full">
            <input type="text" id="searchInput" placeholder="ابحث عن المنتجات..." class="w-full px-4 py-2 rounded-full border border-pink-100 focus:outline-none focus:border-pink-200 bg-white">
            <button class="absolute left-3 top-1/2 transform -translate-y-1/2 text-pink-300">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
            </button>
          </div>
        </div>
        
        <!-- Cart and Menu -->
        <div class="flex items-center space-x-4 space-x-reverse">
          <button id="cartBtn" class="relative p-2 text-white hover:text-pink-100 transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 7.5M7 13v7a2 2 0 002 2h6a2 2 0 002-2v-7m-8 0V9a2 2 0 012-2h4a2 2 0 012 2v4m-6 0h4"></path>
            </svg>
            <span id="cartCount" class="absolute -top-2 -right-2 bg-pink-300 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
          </button>
          
          <button id="wishlistBtn" class="relative p-2 text-white hover:text-pink-100 transition-colors" onclick="showPage('wishlist')">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
            </svg>
            <span id="wishlistCount" class="absolute -top-2 -right-2 bg-pink-300 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
          </button>
          
          <button id="menuToggle" class="md:hidden p-2 text-white">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
      </div>
    </nav>

  <!-- Home Page -->
  <div id="home" class="page-section active">
    <!-- Hero Section -->
    <section class="pt-20 pb-16 gradient-pink">
      <div class="container mx-auto px-6">
        <div class="grid md:grid-cols-2 gap-12 items-center">
          <div class="fade-in">
            <h1 class="text-5xl md:text-6xl font-bold text-pink-400 mb-6 animate-on-scroll">مكياج عصري</h1>
            <p class="text-xl text-pink-300 mb-8 animate-on-scroll">اكتشفي مجموعتنا الحصرية من منتجات المكياج العصرية والأنيقة</p>
            <button class="bg-pink-300 text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-pink-400 transition-colors animate-on-scroll" onclick="scrollToProducts()">
              تسوقي الآن
            </button>
          </div>
          <div class="fade-in">
            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/6bff31a6-8a1b-4655-a7b9-5334606b931c.png" alt="Fashion model wearing elegant light pink and white outfit with flowing fabric, modern styling, professional photography with soft lighting" class="rounded-lg shadow-xl w-full animate-scale-in" />
          </div>
        </div>
      </div>
    </section>

    <!-- Category Filter -->
    <section class="py-8 bg-white">
      <div class="container mx-auto px-6">
        <div class="flex flex-wrap justify-center gap-4 animate-on-scroll">
          <button class="filter-button active px-6 py-3 rounded-full border border-pink-100 text-pink-300 hover:bg-pink-300 hover:text-white" data-category="all">
            جميع المنتجات
          </button>
          <button class="filter-button px-6 py-3 rounded-full border border-pink-100 text-pink-300 hover:bg-pink-300 hover:text-white" data-category="foundations">
            كريمات أساس
          </button>
          <button class="filter-button px-6 py-3 rounded-full border border-pink-100 text-pink-300 hover:bg-pink-300 hover:text-white" data-category="lipsticks">
            أحمر شفاه
          </button>
          <button class="filter-button px-6 py-3 rounded-full border border-pink-100 text-pink-300 hover:bg-pink-300 hover:text-white" data-category="eyeshadows">
            ظلال عيون
          </button>
          <button class="filter-button px-6 py-3 rounded-full border border-pink-100 text-pink-300 hover:bg-pink-300 hover:text-white" data-category="mascaras">
            ماسكارا
          </button>
          <button class="filter-button px-6 py-3 rounded-full border border-pink-100 text-pink-300 hover:bg-pink-300 hover:text-white" data-category="brushes">
            فُرش مكياج
          </button>
        </div>
      </div>
    </section>

    <!-- Products Grid -->
    <section class="py-16" id="productsSection">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12">
          <h2 class="text-4xl font-bold text-pink-400 mb-4 animate-on-scroll">منتجاتنا المميزة</h2>
          <p class="text-pink-300 text-lg animate-on-scroll">اختاري من مجموعتنا الواسعة من المكياج الأنيق</p>
        </div>
        
        <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
          <!-- Product 1: Foundation -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="foundations"
               data-sizes="30ml,50ml"
               data-colors="فاتح,متوسط,داكن"
               data-available="true"
               data-quantity="20">
            <div class="relative">
              <img src="https://m.media-amazon.com/images/I/410XNwuohOL._UF894,1000_QL80_.jpg" alt="كريم أساس سائل" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">كريم أساس سائل</h3>
              <p class="product-description">تغطية مثالية تدوم طوال اليوم مع ترطيب عميق للبشرة</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">300 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>

          <!-- Product 2: Lipstick -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="lipsticks"
               data-sizes="مقاس واحد"
               data-colors="أحمر,وردي,نيود,برتقالي"
               data-available="true"
               data-quantity="50">
            <div class="relative">
              <img src="https://static.hiamag.com/styles/autox754/public/article/15/11/2017/6193821-1895741430.png" alt="أحمر شفاه مطفي" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">أحمر شفاه مطفي</h3>
              <p class="product-description">لون غني وثبات يدوم طويلاً مع ملمس ناعم لا يجفف الشفاه</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">190 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>

          <!-- Product 3: Eyeshadow Palette -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="eyeshadows"
               data-sizes="مقاس واحد"
               data-colors="متعدد"
               data-available="true"
               data-quantity="30">
            <div class="relative">
              <img src="https://barbiephar.com/cdn/shop/files/balyt-thlal-aayon-soyt-mnt-sweet-mint-eyeshadow-palette-469044.jpg?v=1737147285" alt="باليت ظلال عيون" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">باليت ظلال عيون</h3>
              <p class="product-description">مجموعة ألوان متنوعة لإطلالات ساحرة مع ثبات طويل المدى</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">350 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>

          <!-- Product 4: Mascara -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="mascaras"
               data-sizes="مقاس واحد"
               data-colors="أسود,بني"
               data-available="true"
               data-quantity="40">
            <div class="relative">
              <img src="https://m.media-amazon.com/images/I/51oPmNmUuqL._UF894,1000_QL80_.jpg" alt="ماسكارا مكثفة" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">ماسكارا مكثفة</h3>
              <p class="product-description">رموش أطول وأكثر كثافة بدون تكتل مع فرشاة دقيقة</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">160 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>

          <!-- Product 5: Blush -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="blushes"
               data-sizes="مقاس واحد"
               data-colors="وردي,مشمشي,برونزي"
               data-available="true"
               data-quantity="25">
            <div class="relative">
              <img src="https://cdn.salla.sa/KgKND/jV8xnYP1PuZAAqGPYWSqvfDikG3u6QPnVj2zVIlX.jpg" alt="أحمر خدود بودرة" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">أحمر خدود بودرة</h3>
              <p class="product-description">لمسة طبيعية ومشرقة للخدود مع ثبات طويل المدى</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">230 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>

          <!-- Product 6: Concealer -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="concealers"
               data-sizes="فاتح,متوسط,داكن"
               data-colors="فاتح,متوسط,داكن"
               data-available="true"
               data-quantity="18">
            <div class="relative">
              <img src="https://img.joomcdn.net/4d4b61b42193287f8bbf127be3aa6239c1e7e144_original.jpeg" alt="خافي عيوب سائل" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">خافي عيوب سائل</h3>
              <p class="product-description">يخفي الهالات السوداء والعيوب بفعالية مع ترطيب للبشرة</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">180 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>

          <!-- Product 7: Makeup Brush Set -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="brushes"
               data-sizes="طقم 5 قطع,طقم 10 قطع"
               data-colors="وردي,أسود"
               data-available="true"
               data-quantity="15">
            <div class="relative">
              <img src="https://m.media-amazon.com/images/I/61W2v4xeUVL.jpg" alt="طقم فرش مكياج" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">طقم فرش مكياج</h3>
              <p class="product-description">فرش ناعمة وعالية الجودة لتطبيق مثالي للمكياج</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">400 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>

          <!-- Product 8: Setting Spray -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="setting_sprays"
               data-sizes="100ml,200ml"
               data-colors="شفاف"
               data-available="true"
               data-quantity="10">
            <div class="relative">
              <img src="https://menashopeg.com/wp-content/uploads/2024/09/11-4.webp" alt="بخاخ تثبيت المكياج" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">بخاخ تثبيت المكياج</h3>
              <p class="product-description">يحفاظ على مكياجك ثابتاً ومنتعشاً لساعات طويلة</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">250 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>

          <!-- Product 9: Lip Gloss -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="lip_glosses"
               data-sizes="مقاس واحد"
               data-colors="وردي,شفاف"
               data-available="false"
               data-quantity="0">
            <div class="relative">
              <img src="https://m.media-amazon.com/images/I/51Uin5kXzQL.jpg" alt="ملمع شفاه" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">ملمع شفاه</h3>
              <p class="product-description">لمعان جذاب وترطيب للشفاه مع لمسة نهائية غير لاصقة</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">130 جنيه</span>
                <button class="bg-gray-400 text-white px-4 py-2 rounded-full cursor-not-allowed" disabled>
                  غير متوفر
                </button>
              </div>
            </div>
          </div>

          <!-- Product 10: Eyeliner -->
          <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card animate-on-scroll" 
               data-category="eyeliners"
               data-sizes="مقاس واحد"
               data-colors="أسود,بني"
               data-available="true"
               data-quantity="35">
            <div class="relative">
              <img src="https://m.media-amazon.com/images/I/61RtwVMMqpL.jpg" alt="آيلاينر سائل" class="w-full h-64 object-cover product-image" />
              <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon" onclick="toggleWishlist(this)">
                <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </button>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-pink-400 mb-2">آيلاينر سائل</h3>
              <p class="product-description">رسم دقيق وثبات فائق بدون تلطخ طوال اليوم</p>
              <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-pink-400">170 جنيه</span>
                <button class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors add-to-cart">
                  أضف للسلة
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="text-center mt-12">
          <button id="loadMoreBtn" class="bg-pink-300 text-white px-8 py-3 rounded-full hover:bg-pink-400 transition-colors animate-on-scroll">
            عرض المزيد من المنتجات
          </button>
        </div>
      </div>
    </section>

    <!-- Featured Collection -->
    <section class="py-16 gradient-pink">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12">
          <h2 class="text-4xl font-bold text-pink-400 mb-4 animate-on-scroll">مجموعة مختارة</h2>
          <p class="text-pink-300 text-lg animate-on-scroll">أحدث صيحات المكياج لهذا الموسم</p>
        </div>
        
        <div class="grid md:grid-cols-3 gap-8">
          <div class="bg-white rounded-xl p-6 text-center card-hover animate-on-scroll">
            <img src="https://cdn.salla.sa/OqwaRO/NjN8FZEwSYmq5UJfIL7yk7HbauP7ohY7yztBwlLO.jpg" alt="مجموعة مكياج العيون" class="w-full rounded-lg mb-4 animate-scale-in" />
            <h3 class="text-lg font-semibold text-pink-400 mb-2">مجموعة مكياج العيون</h3>
            <p class="text-black-300 mb-4">ظلال، ماسكارا، وآيلاينر لإطلالة عيون جذابة</p>
            <button class="bg-pink-300 text-white px-6 py-2 rounded-full hover:bg-pink-400 transition-colors">
              تسوقي الآن
            </button>
          </div>
          
          <div class="bg-white rounded-xl p-6 text-center card-hover animate-on-scroll">
            <img src="https://m.media-amazon.com/images/I/61zFjP7Qn8L._UF894,1000_QL80_.jpg" alt="مجموعة مكياج الشفاه" class="w-full rounded-lg mb-4 animate-scale-in" />
            <h3 class="text-lg font-semibold text-pink-400 mb-2">مجموعة مكياج الشفاه</h3>
            <p class="text-black-300 mb-4">أحمر شفاه وملمعات بألوان عصرية</p>
            <button class="bg-pink-300 text-white px-6 py-2 rounded-full hover:bg-pink-400 transition-colors">
              تسوقي الآن
            </button>
          </div>
          
          <div class="bg-white rounded-xl p-6 text-center card-hover animate-on-scroll">
            <img src="https://missuniverseskincare.com/cdn/shop/files/MissU-Web-Complete-Set.jpg?v=1698261590" alt="مجموعة العناية بالبشرة" class="w-full rounded-lg mb-4 animate-scale-in" />
            <h3 class="text-lg font-semibold text-pink-400 mb-2">مجموعة العناية بالبشرة</h3>
            <p class="text-black-300 mb-4">منتجات أساسية لبشرة صحية ومشرقة</p>
            <button class="bg-pink-300 text-white px-6 py-2 rounded-full hover:bg-pink-400 transition-colors">
              تسوقي الآن
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Newsletter -->
    <section class="py-16 bg-white">
      <div class="container mx-auto px-6 text-center">
        <h2 class="text-3xl font-bold text-pink-400 mb-4 animate-on-scroll">اتصل بنا</h2>
        <p class="text-pink-300 mb-8 animate-on-scroll">احصلي على آخر العروض والمنتجات الجديدة</p>
        <div class="max-w-md mx-auto flex justify-center animate-on-scroll"> <!-- تم تعديل هذا الـ div -->
          <button class="bg-pink-300 text-white px-8 py-3 rounded-full hover:bg-pink-400 transition-colors">
             إرسال
          </button>
        </div>
      </div>
    </section>
  </div>

  <!-- Wishlist Page -->
  <div id="wishlist" class="page-section pt-20">
    <section class="py-16">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12">
          <h2 class="text-4xl font-bold text-pink-400 mb-4">المفضلة</h2>
          <p class="text-pink-300 text-lg">المنتجات التي أحببتها</p>
        </div>
        
        <div id="wishlistGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
          <!-- Wishlist items will be displayed here -->
        </div>
        
        <div id="emptyWishlist" class="text-center py-16">
          <svg class="w-24 h-24 mx-auto text-pink-200 mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
          </svg>
          <h3 class="text-2xl font-bold text-pink-300 mb-4">قائمة المفضلة فارغة</h3>
          <p class="text-pink-200 mb-6">لم تقومي بإضافة أي منتجات إلى المفضلة بعد</p>
          <button onclick="showPage('home')" class="bg-pink-300 text-white px-8 py-3 rounded-full hover:bg-pink-400 transition-colors">
            تسوقي الآن
          </button>
        </div>
      </div>
    </section>
  </div>

  <!-- Cart Modal -->
  <div id="cartModal" class="fixed inset-0 z-50 hidden modal">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 modal-content">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold text-pink-400">سلة التسوق</h2>
          <button id="closeCart" class="text-pink-300 hover:text-pink-400">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        
        <div id="cartItems" class="space-y-4 mb-6 cart-items-scroll">
          <!-- Cart items will be added here -->
        </div>
        
        <div class="border-t border-pink-100 pt-4">
          <div class="flex justify-between items-center mb-4">
            <span class="text-lg font-semibold text-pink-400">المجموع:</span>
            <span id="cartTotal" class="text-xl font-bold text-pink-400">0 جنيه</span>
          </div>
          <button id="proceedToCheckoutBtn" class="w-full bg-pink-300 text-white py-3 rounded-full hover:bg-pink-400 transition-colors">
            إتمام الشراء
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Detail Modal -->
  <div id="productDetailModal" class="fixed inset-0 z-50 hidden modal">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6 modal-content">
        <div class="flex justify-between items-center mb-6">
          <h2 id="modalProductName" class="text-2xl font-bold text-pink-400"></h2>
          <button id="closeProductDetail" class="text-pink-300 hover:text-pink-400">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <img id="modalProductImage" src="" alt="" class="w-full h-auto rounded-lg object-cover mb-4" />
            <p id="modalProductDescription" class="text-pink-300 text-sm mb-4"></p>
          </div>
          <div>
            <div class="mb-4">
              <span class="text-lg font-semibold text-pink-400">السعر:</span>
              <span id="modalProductPrice" class="text-xl font-bold text-pink-400 mr-2"></span>
            </div>
            <div class="mb-4">
              <span class="text-lg font-semibold text-pink-400">الحالة:</span>
              <span id="modalProductAvailability" class="text-lg font-bold"></span>
            </div>

            <div id="modalProductSizes" class="mb-4">
              <p class="text-lg font-semibold text-pink-400 mb-2">المقاسات:</p>
              <div id="sizesContainer" class="flex flex-wrap gap-2">
                <!-- Sizes will be injected here -->
              </div>
            </div>

            <div id="modalProductColors" class="mb-6">
              <p class="text-lg font-semibold text-pink-400 mb-2">الألوان:</p>
              <div id="colorsContainer" class="flex flex-wrap gap-2">
                <!-- Colors will be injected here -->
              </div>
            </div>

            <button id="modalAddToCartBtn" class="w-full bg-pink-300 text-white py-3 rounded-full hover:bg-pink-400 transition-colors mb-3">
              أضف للسلة
            </button>
            <button id="modalRequestOrderBtn" class="w-full bg-gray-500 text-white py-3 rounded-full hover:bg-gray-600 transition-colors">
              طلب المنتج (غير متوفر حالياً)
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Checkout Page -->
  <div id="checkoutPage" class="page-section hidden">
    <div class="container mx-auto px-6 py-12">
      <div class="checkout-card">
        <h2 class="checkout-title">إتمام الشراء</h2>
        
        <!-- Important Note for Checkout -->
        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6" role="alert">
          <p class="font-bold">ملاحظة هامة:</p>
          <p>يرجى التأكد من صحة جميع البيانات المدخلة (الاسم، أرقام الهواتف، العنوان) حيث سيتم التواصل معكم بناءً عليها لتأكيد الطلب وتفاصيل الشحن.</p>
        </div>

        <div class="grid md:grid-cols-2 gap-8 mt-8">
          <!-- Customer Information Form -->
          <div>
            <h3 class="order-summary-title">بيانات العميل</h3>
            <form id="checkoutForm" class="space-y-4">
              <div class="form-group">
                <label for="fullName" class="form-label">الاسم الكامل:</label>
                <input type="text" id="fullName" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="phone1" class="form-label">رقم الهاتف 1:</label>
                <input type="tel" id="phone1" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="phone2" class="form-label">رقم الهاتف 2 (اختياري):</label>
                <input type="tel" id="phone2" class="form-input">
              </div>
              <div class="form-group">
                <label for="address" class="form-label">العنوان كاملاً:</label>
                <textarea id="address" class="form-input h-24 resize-none" required></textarea>
              </div>
            </form>
          </div>

          <!-- Order Summary -->
          <div>
            <h3 class="order-summary-title">ملخص الطلب</h3>
            <div id="checkoutOrderSummary" class="space-y-2">
              <!-- Cart items will be loaded here -->
            </div>
            <div id="checkoutTotal" class="order-summary-total">
              <span>المجموع الكلي:</span>
              <span>0 جنيه</span>
            </div>
            <button id="confirmOrderBtn" class="confirm-order-btn">تأكيد الطلب</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-pink-50 py-12">
    <div class="container mx-auto px-6">
      <div class="grid md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-2xl font-bold text-pink-400 mb-4">متجر مريام</h3>
          <p class="text-pink-300 mb-4">وجهتك الأولى لمنتجات المكياج العصرية والأنيقة</p>
          <div class="flex space-x-4 space-x-reverse">
            <a href="#" class="text-pink-300 hover:text-pink-400">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
              </svg>
            </a>
            <a href="#" class="text-pink-300 hover:text-pink-400">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 01-1.93.07 4.28 4.28 0 004 2.98 8.521 8.521 0 01-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
              </svg>
            </a>
            <a href="#" class="text-pink-300 hover:text-pink-400">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.410 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.748-1.378 0 0-.599 2.282-.744 2.840-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24.001 12.017 24.001c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z"/>
              </svg>
            </a>
          </div>
        </div>
        
        <div>
          <h4 class="text-lg font-semibold text-pink-400 mb-4">روابط سريعة</h4>
          <ul class="space-y-2 text-pink-300">
            <li><a href="#" class="hover:text-pink-400 transition-colors">الرئيسية</a></li>
            <li><a href="#" class="hover:text-pink-400 transition-colors">المنتجات</a></li>
            <li><a href="#" class="hover:text-pink-400 transition-colors">عنا</a></li>
            <li><a href="#" class="hover:text-pink-400 transition-colors">التواصل</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="text-lg font-semibold text-pink-400 mb-4">الفئات</h4>
          <ul class="space-y-2 text-pink-300">
            <li>كريمات أساس</li>
            <li>أحمر شفاه</li>
            <li>ظلال عيون</li>
            <li>ماسكارا</li>
            <li>فُرش مكياج</li>
          </ul>
        </div>
        
        <div>
          <h4 class="text-lg font-semibold text-pink-400 mb-4">خدمة العملاء</h4>
          <ul class="space-y-2 text-pink-300">
            <li>الدعم الفني</li>
            <li>سياسة الإرجاع</li>
            <li>الشحن والتوصيل</li>
            <li>الدفع الآمن</li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-pink-100 mt-8 pt-8 text-center text-pink-300">
        <p>© 2024 متجر الأناقة. جميع الحقوق محفوظة.</p>
      </div>
    </div>
  </footer>

  <script>
    // Global variables
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    let cartCount = cart.length;
    let wishlistCount = wishlist.length;
    let currentProduct = null;
    let selectedSize = null;
    let selectedColor = null;

    // ** Telegram Bot Configuration **
    // Replace with your actual bot token and chat ID
    const TELEGRAM_BOT_TOKEN = '7575069876:AAHUXaFWEapzdOgy8gbkBKsBWSvB6aA4c1U'; 
    const TELEGRAM_CHAT_ID = '5375896204';     

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      updateCartDisplay();
      updateWishlistDisplay();
      updateWishlistPage();
      
      setTimeout(() => {
        document.querySelectorAll('.fade-in').forEach(element => {
          element.classList.add('visible');
        });
      }, 100);
      
      initAddToCartListeners();
      initFilterButtons();
      initWishlistItems();

      // Header scroll effect
      window.addEventListener('scroll', function() {
        const navbar = document.getElementById('navbar');
        if (window.scrollY > 50) {
          navbar.classList.add('scrolled');
        } else {
          navbar.classList.remove('scrolled');
        }
      });

      // Add event listeners to product cards for opening detail modal
      document.querySelectorAll('.product-card').forEach(card => {
        card.addEventListener('click', function(e) {
          // Prevent opening modal if clicking on add to cart or wishlist button
          if (e.target.closest('.add-to-cart') || e.target.closest('.heart-icon')) {
            return;
          }
          openProductDetailModal(this);
        });
      });

      // Close product detail modal
      document.getElementById('closeProductDetail').addEventListener('click', closeProductDetailModal);

      // Add to cart from product detail modal
      document.getElementById('modalAddToCartBtn').addEventListener('click', function() {
        if (currentProduct && currentProduct.available && currentProduct.quantity > 0) {
            // Determine if options are truly required for this product
            const requiresSize = currentProduct.sizes.length > 0 && currentProduct.sizes[0] !== 'مقاس واحد';
            const requiresColor = currentProduct.colors.length > 0 && currentProduct.colors[0] !== 'متعدد';

            if (requiresSize && !selectedSize) {
                showNotification('يرجى اختيار المقاس أولاً.');
                return;
            }
            if (requiresColor && !selectedColor) {
                showNotification('يرجى اختيار اللون أولاً.');
                return;
            }

            const productToAdd = {
                name: currentProduct.name,
                price: currentProduct.price,
                image: currentProduct.image,
                description: currentProduct.description,
                size: selectedSize || (requiresSize ? '' : 'مقاس واحد'), // Use selected or default
                color: selectedColor || (requiresColor ? '' : 'متعدد'), // Use selected or default
                id: Date.now()
            };
            
            cart.push(productToAdd);
            cartCount++;
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
            showNotification('تم إضافة المنتج إلى السلة', true); // Changed to green notification
            closeProductDetailModal();
        } else {
            showNotification('المنتج غير متوفر حالياً.');
        }
      });

      // Request order from product detail modal
      document.getElementById('modalRequestOrderBtn').addEventListener('click', function() {
        if (currentProduct) {
          showNotification(`تم إرسال طلب لمنتج "${currentProduct.name}". سنتواصل معك قريباً!`);
          closeProductDetailModal();
        }
      });

      // Cart modal functionality
      document.getElementById('cartBtn').addEventListener('click', function() {
        updateCartModal();
        document.getElementById('cartModal').classList.remove('hidden');
      });

      document.getElementById('closeCart').addEventListener('click', function() {
        document.getElementById('cartModal').classList.add('hidden');
      });

      // Proceed to Checkout button in Cart Modal
      document.getElementById('proceedToCheckoutBtn').addEventListener('click', function() {
        if (cart.length === 0) {
            showNotification('سلة التسوق فارغة. يرجى إضافة منتجات أولاً.');
            return;
        }
        document.getElementById('cartModal').classList.add('hidden'); // Hide cart modal
        showPage('checkoutPage'); // Show checkout page
        populateCheckoutSummary(); // Populate order summary
      });

      // Confirm Order button on Checkout Page
      document.getElementById('confirmOrderBtn').addEventListener('click', async function() { // Added async here
        const fullName = document.getElementById('fullName').value;
        const phone1 = document.getElementById('phone1').value;
        const phone2 = document.getElementById('phone2').value;
        const address = document.getElementById('address').value;

        if (!fullName || !phone1 || !address) {
            showNotification('يرجى ملء جميع الحقول المطلوبة (الاسم الكامل، رقم الهاتف 1، العنوان).', false, true); // Changed to error notification
            return;
        }

        let orderDetails = `✅ *طلب جديد من متجر مريام* ✅\n\n`;
        orderDetails += `*بيانات العميل:*\n`;
        orderDetails += `الاسم: ${fullName}\n`;
        orderDetails += `الهاتف 1: ${phone1}\n`;
        if (phone2) orderDetails += `الهاتف 2: ${phone2}\n`;
        orderDetails += `العنوان: ${address}\n\n`;
        orderDetails += `*المنتجات المطلوبة:*\n`;
        
        let totalOrderPrice = 0;
        cart.forEach((item, index) => {
            orderDetails += `${index + 1}. ${item.name} (${item.price} جنيه)\n`;
            if (item.size && item.size !== 'مقاس واحد') orderDetails += `   المقاس: ${item.size}\n`;
            if (item.color && item.color !== 'متعدد') orderDetails += `   اللون: ${item.color}\n`;
            totalOrderPrice += item.price;
        });
        orderDetails += `\n*المجموع الكلي: ${totalOrderPrice} جنيه*\n\n`;
        orderDetails += `_تم الطلب في: ${new Date().toLocaleString('ar-EG', { timeZone: 'Africa/Cairo' })}_`; // Added timestamp

        // Send order details to Telegram
        await sendTelegramMessage(orderDetails); // Await the message sending

        // Show success notification with two lines and animation
        showNotification('تم تأكيد طلبك بنجاح! سنتواصل معك قريباً.', true); 
        
        // Clear cart and redirect to home or thank you page
        cart = [];
        cartCount = 0;
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartDisplay();
        showPage('home'); // Go back to home page after order
        document.getElementById('checkoutForm').reset(); // Clear form
      });


      // Wishlist button
      document.getElementById('wishlistBtn').addEventListener('click', function() {
        showPage('wishlist');
      });

      // Newsletter subscription
      document.querySelector('section:nth-last-child(2) button').addEventListener('click', function() {
        const emailInput = this.previousElementSibling;
        if (emailInput.value) {
          showNotification('تم اشتراكك بنجاح في النشرة الإخبارية');
          emailInput.value = '';
        } else {
          showNotification('يرجى إدخال عنوان بريد إلكتروني صحيح');
        }
      });
      
      // Load more products
      document.getElementById('loadMoreBtn').addEventListener('click', function() {
        showNotification('سيتم إضافة المزيد من المنتجات قريباً');
      });

      // Animation on scroll functionality
      const animateElements = document.querySelectorAll('.animate-on-scroll, .animate-scale-in');

      const observerOptions = {
        root: null, // relative to the viewport
        rootMargin: '0px',
        threshold: 0.1 // 10% of the element must be visible
      };

      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            observer.unobserve(entry.target); // Stop observing once visible
          }
        });
      }, observerOptions);

      animateElements.forEach(element => {
        observer.observe(element);
      });
    });

    // Page navigation
    function showPage(pageName) {
      document.querySelectorAll('.page-section').forEach(section => {
        section.classList.remove('active');
        section.classList.add('hidden'); // Ensure it's hidden
      });
      document.getElementById(pageName).classList.remove('hidden'); // Show the target page
      document.getElementById(pageName).classList.add('active');
      window.scrollTo(0, 0); // Scroll to top of the new page
    }

    // Function to scroll to products section
    function scrollToProducts() {
      const productsSection = document.getElementById('productsSection');
      if (productsSection) {
        productsSection.scrollIntoView({ behavior: 'smooth' });
      }
    }

    // Initialize add to cart event listeners
    function initAddToCartListeners() {
      document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation(); // Prevent click from bubbling up to product card

          const productCard = this.closest('.product-card');
          const productAvailable = productCard.dataset.available === 'true';

          if (!productAvailable) {
            showNotification('هذا المنتج غير متوفر حالياً.');
            return;
          }
          
          const productSizes = productCard.dataset.sizes ? productCard.dataset.sizes.split(',') : [];
          const productColors = productCard.dataset.colors ? productCard.dataset.colors.split(',') : [];

          // Check if product truly requires options (not just 'مقاس واحد' or 'متعدد')
          const requiresSizeSelection = productSizes.length > 0 && productSizes[0] !== 'مقاس واحد';
          const requiresColorSelection = productColors.length > 0 && productColors[0] !== 'متعدد';

          if (requiresSizeSelection || requiresColorSelection) {
            openProductDetailModal(productCard); // Open modal for selection
          } else {
            addProductToCartDirectly(productCard); // Add directly if no options needed
          }
        });
      });
    }

    // Add product to cart directly
    function addProductToCartDirectly(productCard) {
      const productName = productCard.querySelector('h3').textContent;
      const productPriceText = productCard.querySelector('span.text-xl').textContent;
      const productPrice = parseInt(productPriceText.match(/\d+/)[0]); 
      const productImage = productCard.querySelector('img').src;
      const productDescription = productCard.querySelector('p').textContent;

      const product = {
        name: productName,
        price: productPrice,
        image: productImage,
        description: productDescription,
        size: 'مقاس واحد', // Default if no specific sizes
        color: 'متعدد', // Default if no specific colors
        id: Date.now() 
      };
      
      cart.push(product);
      cartCount++;
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartDisplay();
      
      const button = productCard.querySelector('.add-to-cart');
      button.classList.add('cart-badge');
      setTimeout(() => {
        button.classList.remove('cart-badge');
      }, 500);
      
      showNotification('تم إضافة المنتج إلى السلة', true); // Changed to green notification
    }

    // Open Product Detail Modal
    function openProductDetailModal(productCardElement) {
      const productName = productCardElement.querySelector('h3').textContent;
      const productPriceText = productCardElement.querySelector('span.text-xl').textContent;
      const productPrice = parseInt(productPriceText.match(/\d+/)[0]);
      const productImage = productCardElement.querySelector('img').src;
      const productDescription = productCardElement.querySelector('p').textContent;
      const productSizes = productCardElement.dataset.sizes ? productCardElement.dataset.sizes.split(',') : [];
      const productColors = productCardElement.dataset.colors ? productCardElement.dataset.colors.split(',') : []; 
      const productAvailable = productCardElement.dataset.available === 'true';
      const productQuantity = parseInt(productCardElement.dataset.quantity);

      currentProduct = {
        name: productName,
        price: productPrice,
        image: productImage,
        description: productDescription,
        sizes: productSizes,
        colors: productColors,
        available: productAvailable,
        quantity: productQuantity
      };

      // Reset selected options
      selectedSize = null;
      selectedColor = null;

      document.getElementById('modalProductName').textContent = currentProduct.name;
      document.getElementById('modalProductImage').src = currentProduct.image;
      document.getElementById('modalProductImage').alt = currentProduct.name;
      document.getElementById('modalProductDescription').textContent = currentProduct.description;
      document.getElementById('modalProductPrice').textContent = `${currentProduct.price} جنيه`;

      const availabilityText = currentProduct.available && currentProduct.quantity > 0 ? 'متوفر' : 'غير متوفر';
      const availabilityColor = currentProduct.available && currentProduct.quantity > 0 ? 'text-green-500' : 'text-red-500';
      document.getElementById('modalProductAvailability').textContent = availabilityText;
      document.getElementById('modalProductAvailability').className = `text-lg font-bold ${availabilityColor}`;

      // Populate sizes
      const sizesContainer = document.getElementById('sizesContainer');
      sizesContainer.innerHTML = '';
      const requiresSizeSelection = currentProduct.sizes.length > 0 && currentProduct.sizes[0] !== 'مقاس واحد';
      if (requiresSizeSelection) {
        document.getElementById('modalProductSizes').style.display = 'block';
        currentProduct.sizes.forEach(size => {
          const sizeBtn = document.createElement('button');
          sizeBtn.textContent = size;
          sizeBtn.className = 'px-4 py-2 border border-pink-200 rounded-full text-pink-400 hover:bg-pink-100 transition-colors';
          sizeBtn.addEventListener('click', () => {
            sizesContainer.querySelectorAll('button').forEach(btn => btn.classList.remove('option-selected'));
            sizeBtn.classList.add('option-selected');
            selectedSize = size;
            updateProductDetailModalButtons();
          });
          sizesContainer.appendChild(sizeBtn);
        });
      } else {
        document.getElementById('modalProductSizes').style.display = 'none';
      }

      // Populate colors
      const colorsContainer = document.getElementById('colorsContainer');
      colorsContainer.innerHTML = '';
      const requiresColorSelection = currentProduct.colors.length > 0 && currentProduct.colors[0] !== 'متعدد';
      if (requiresColorSelection) {
        document.getElementById('modalProductColors').style.display = 'block';
        currentProduct.colors.forEach(color => {
          const colorBtn = document.createElement('button');
          colorBtn.textContent = color;
          colorBtn.className = 'px-4 py-2 border border-pink-200 rounded-full text-pink-400 hover:bg-pink-100 transition-colors';
          colorBtn.addEventListener('click', () => {
            colorsContainer.querySelectorAll('button').forEach(btn => btn.classList.remove('option-selected'));
            colorBtn.classList.add('option-selected');
            selectedColor = color;
            updateProductDetailModalButtons();
          });
          colorsContainer.appendChild(colorBtn);
        });
      } else {
        document.getElementById('modalProductColors').style.display = 'none';
      }

      updateProductDetailModalButtons();
      document.getElementById('productDetailModal').classList.remove('hidden');
    }

    function closeProductDetailModal() {
      document.getElementById('productDetailModal').classList.add('hidden');
    }

    // Update buttons in product detail modal based on availability and selections
    function updateProductDetailModalButtons() {
      const addToCartBtn = document.getElementById('modalAddToCartBtn');
      const requestOrderBtn = document.getElementById('modalRequestOrderBtn');

      if (currentProduct.available && currentProduct.quantity > 0) {
        let disableAddToCart = false;
        let buttonText = 'أضف للسلة';

        const requiresSizeSelection = currentProduct.sizes.length > 0 && currentProduct.sizes[0] !== 'مقاس واحد';
        const requiresColorSelection = currentProduct.colors.length > 0 && currentProduct.colors[0] !== 'متعدد';

        if (requiresSizeSelection && !selectedSize) {
            disableAddToCart = true;
            buttonText = 'اختر المقاس أولاً';
        } else if (requiresColorSelection && !selectedColor) {
            disableAddToCart = true;
            buttonText = 'اختر اللون أولاً';
        }
        
        addToCartBtn.disabled = disableAddToCart;
        addToCartBtn.textContent = buttonText;
        if (disableAddToCart) {
            addToCartBtn.classList.add('bg-gray-400', 'cursor-not-allowed');
            addToCartBtn.classList.remove('bg-pink-300', 'hover:bg-pink-400');
        } else {
            addToCartBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
            addToCartBtn.classList.add('bg-pink-300', 'hover:bg-pink-400');
        }
        requestOrderBtn.style.display = 'none';
      } else {
        addToCartBtn.disabled = true;
        addToCartBtn.classList.add('bg-gray-400', 'cursor-not-allowed');
        addToCartBtn.classList.remove('bg-pink-300', 'hover:bg-pink-400');
        addToCartBtn.textContent = 'غير متوفر';
        requestOrderBtn.style.display = 'block';
      }
    }

    // Initialize filter buttons
    function initFilterButtons() {
      document.querySelectorAll('.filter-button').forEach(button => {
        button.addEventListener('click', function() {
          document.querySelectorAll('.filter-button').forEach(btn => {
            btn.classList.remove('active');
          });
          this.classList.add('active');
          
          const category = this.dataset.category;
          const products = document.querySelectorAll('.product-card');
          
          products.forEach(product => {
            if (category === 'all' || product.dataset.category === category) {
              product.style.display = 'block';
            } else {
              product.style.display = 'none';
            }
          });
        });
      });
    }

    // Wishlist functionality
    function toggleWishlist(heartIcon) {
      const productCard = heartIcon.closest('.product-card');
      const productName = productCard.querySelector('h3').textContent;
      const productPriceText = productCard.querySelector('span.text-xl').textContent;
      const productPrice = parseInt(productPriceText.match(/\d+/)[0]);
      const productImage = productCard.querySelector('img').src;
      const productDescription = productCard.querySelector('p').textContent;
      
      const product = {
        name: productName,
        price: productPrice,
        image: productImage,
        description: productDescription,
        id: productName + productPrice
      };
      
      const existingIndex = wishlist.findIndex(item => item.id === product.id);
      
      if (existingIndex > -1) {
        wishlist.splice(existingIndex, 1);
        heartIcon.classList.remove('liked');
        showNotification('تم حذف المنتج من المفضلة', false, true); // Red for removal
      } else {
        wishlist.push(product);
        heartIcon.classList.add('liked');
        showNotification('تم إضافة المنتج إلى المفضلة', true); // Green for addition
      }
      
      localStorage.setItem('wishlist', JSON.stringify(wishlist));
      wishlistCount = wishlist.length;
      updateWishlistDisplay();
      updateWishlistPage();
    }

    // Initialize wishlist items
    function initWishlistItems() {
      document.querySelectorAll('.heart-icon').forEach(heart => {
        const productCard = heart.closest('.product-card');
        const productName = productCard.querySelector('h3').textContent;
        const productPriceText = productCard.querySelector('span.text-xl').textContent;
        const productPrice = parseInt(productPriceText.match(/\d+/)[0]);
        const productId = productName + productPrice;
        
        if (wishlist.some(item => item.id === productId)) {
          heart.classList.add('liked');
        }
      });
    }

    // Update cart display
    function updateCartDisplay() {
      document.getElementById('cartCount').textContent = cartCount;
      updateCartModal();
    }

    // Update wishlist display
    function updateWishlistDisplay() {
      document.getElementById('wishlistCount').textContent = wishlistCount;
    }

    // Update cart modal
    function updateCartModal() {
      const cartItemsContainer = document.getElementById('cartItems');
      const cartTotal = document.getElementById('cartTotal');
      
      if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p class="text-pink-300 text-center">السلة فارغة</p>';
        cartTotal.textContent = '0 جنيه';
        document.getElementById('proceedToCheckoutBtn').disabled = true;
        document.getElementById('proceedToCheckoutBtn').classList.add('bg-gray-400', 'cursor-not-allowed');
        document.getElementById('proceedToCheckoutBtn').classList.remove('bg-pink-300', 'hover:bg-pink-400');
        return;
      }
      
      cartItemsContainer.innerHTML = '';
      let total = 0;
      
      cart.forEach(item => {
        total += item.price;
        
        const cartItem = document.createElement('div');
        cartItem.className = 'flex items-center justify-between p-4 border border-pink-100 rounded-lg';
        cartItem.innerHTML = `
          <div class="flex items-center space-x-4 space-x-reverse">
            <img src="${item.image}" alt="${item.name}" class="w-12 h-12 object-cover rounded" />
            <div>
              <h4 class="font-semibold text-pink-400">${item.name}</h4>
              <p class="text-pink-300">${item.price} جنيه</p>
              ${item.size && item.size !== 'مقاس واحد' ? `<p class="text-pink-300 text-xs">المقاس: ${item.size}</p>` : ''}
              ${item.color && item.color !== 'متعدد' ? `<p class="text-pink-300 text-xs">اللون: ${item.color}</p>` : ''}
            </div>
          </div>
          <button onclick="removeFromCart(${item.id})" class="text-pink-300 hover:text-pink-400">
            <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
            </svg>
          </button>
        `;
        cartItemsContainer.appendChild(cartItem);
      });
      
      cartTotal.textContent = `${total} جنيه`;
      document.getElementById('proceedToCheckoutBtn').disabled = false;
      document.getElementById('proceedToCheckoutBtn').classList.remove('bg-gray-400', 'cursor-not-allowed');
      document.getElementById('proceedToCheckoutBtn').classList.add('bg-pink-300', 'hover:bg-pink-400');
    }

    // Update wishlist page
    function updateWishlistPage() {
      const wishlistGrid = document.getElementById('wishlistGrid');
      const emptyWishlist = document.getElementById('emptyWishlist');
      
      if (wishlist.length === 0) {
        wishlistGrid.style.display = 'none';
        emptyWishlist.style.display = 'block';
        return;
      }
      
      wishlistGrid.style.display = 'grid';
      emptyWishlist.style.display = 'none';
      wishlistGrid.innerHTML = '';
      
      wishlist.forEach(item => {
        const wishlistItem = document.createElement('div');
        wishlistItem.className = 'bg-white rounded-xl shadow-lg overflow-hidden card-hover';
        wishlistItem.innerHTML = `
          <div class="relative">
            <img src="${item.image}" alt="${item.description}" class="w-full h-64 object-cover product-image" />
            <button class="absolute top-4 right-4 p-2 bg-white rounded-full heart-icon liked" onclick="removeFromWishlist('${item.id}')">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
              </svg>
            </button>
          </div>
          <div class="p-6">
            <h3 class="text-lg font-semibold text-pink-400 mb-2">${item.name}</h3>
            <p class="product-description">${item.description}</p>
            <div class="flex justify-between items-center">
              <span class="text-xl font-bold text-pink-400">${item.price} جنيه</span>
              <button onclick="addToCartFromWishlist('${item.id}')" class="bg-pink-300 text-white px-4 py-2 rounded-full hover:bg-pink-400 transition-colors">
                أضف للسلة
              </button>
            </div>
          </div>
        `;
        wishlistGrid.appendChild(wishlistItem);
      });
    }

    // Remove from cart
    function removeFromCart(id) {
      cart = cart.filter(item => item.id !== id);
      cartCount = cart.length;
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartDisplay();
      populateCheckoutSummary(); // Update checkout summary if on that page
      showNotification('تم حذف المنتج من السلة', false, true); // Red for removal
    }

    // Remove from wishlist
    function removeFromWishlist(id) {
      wishlist = wishlist.filter(item => item.id !== id);
      wishlistCount = wishlist.length;
      localStorage.setItem('wishlist', JSON.stringify(wishlist));
      updateWishlistDisplay();
      updateWishlistPage();
      showNotification('تم حذف المنتج من المفضلة', false, true); // Red for removal
    }

    // Add to cart from wishlist
    function addToCartFromWishlist(id) {
      const item = wishlist.find(item => item.id === id);
      
      if (item) {
        const cartItem = {
          ...item,
          id: Date.now()
        };
        
        cart.push(cartItem);
        cartCount++;
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartDisplay();
        showNotification('تم إضافة المنتج إلى السلة', true); // Changed to green notification
      }
    }

    // Populate Checkout Order Summary
    function populateCheckoutSummary() {
        const summaryContainer = document.getElementById('checkoutOrderSummary');
        const totalElement = document.getElementById('checkoutTotal').querySelector('span:last-child');
        let total = 0;

        summaryContainer.innerHTML = ''; // Clear previous items

        if (cart.length === 0) {
            summaryContainer.innerHTML = '<p class="text-pink-300 text-center">لا توجد منتجات في السلة.</p>';
            totalElement.textContent = '0 جنيه';
            return;
        }

        cart.forEach(item => {
            total += item.price;
            const itemDiv = document.createElement('div');
            itemDiv.className = 'order-summary-item';
            itemDiv.innerHTML = `
                <img src="${item.image}" alt="${item.name}" />
                <div class="order-summary-item-details">
                    <h4>${item.name}</h4>
                    <p>${item.price} جنيه</p>
                    ${item.size && item.size !== 'مقاس واحد' ? `<p class="text-xs">المقاس: ${item.size}</p>` : ''}
                    ${item.color && item.color !== 'متعدد' ? `<p class="text-xs">اللون: ${item.color}</p>` : ''}
                </div>
                <button onclick="removeFromCart(${item.id})" class="text-pink-300 hover:text-pink-400">
                    <svg class="w-5 h-5" fill="none", stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round", stroke-linejoin="round", stroke-width="2", d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                </button>
            `;
            summaryContainer.appendChild(itemDiv);
        });

        totalElement.textContent = `${total} جنيه`;
    }

    // Show notification function (modified)
    function showNotification(message, isSuccess = false, isError = false) {
      const notificationContainer = document.querySelector('.notification-container') || (() => {
        const div = document.createElement('div');
        div.className = 'notification-container';
        document.body.appendChild(div);
        return div;
      })();

      const notificationItem = document.createElement('div');
      notificationItem.className = 'notification-item';

      if (isSuccess) {
        notificationItem.innerHTML = `
          <div class="main-message">${message}</div>
          <div class="sub-message">شكراً لتسوقك معنا!</div>
        `;
        // Set background color to green for success messages
        notificationItem.style.backgroundColor = '#10B981'; 
      } else if (isError) {
        notificationItem.classList.add('error'); // Add class for error messages
        notificationItem.textContent = message;
        // Set background color to red for error messages
        notificationItem.style.backgroundColor = '#EF4444';
      }
      else {
        notificationItem.classList.add('regular'); // Add class for regular messages
        notificationItem.textContent = message;
        // Set background color to pink for regular messages (already defined in CSS, but explicit here for clarity)
        notificationItem.style.backgroundColor = '#f472b6'; 
      }
      
      notificationContainer.appendChild(notificationItem);

      // Show animation
      setTimeout(() => {
        notificationItem.classList.add('show');
      }, 10);

      // Hide and remove after 4 seconds (changed from 3 seconds)
      setTimeout(() => {
        notificationItem.classList.remove('show');
        notificationItem.classList.add('hide');
        notificationItem.addEventListener('transitionend', () => {
          notificationItem.remove();
        }, { once: true });
      }, 4000); // Changed to 4000 milliseconds (4 seconds)
    }

    // ** Function to send message to Telegram **
    async function sendTelegramMessage(message) {
        const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
        const params = {
            chat_id: TELEGRAM_CHAT_ID,
            text: message,
            parse_mode: 'Markdown' // Use Markdown for bold text etc.
        };

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(params)
            });

            const data = await response.json();
            if (data.ok) {
                console.log('Message sent to Telegram successfully:', data);
            } else {
                console.error('Failed to send message to Telegram:', data);
                showNotification('فشل إرسال الطلب إلى التليجرام. يرجى المحاولة مرة أخرى.');
            }
        } catch (error) {
            console.error('Error sending message to Telegram:', error);
            showNotification('حدث خطأ أثناء الاتصال بخدمة التليجرام.');
        }
    }
  </script>
</body>
</html>

